(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{560:function(s,t,a){s.exports=a.p+"assets/img/image-20200413230903756.51e1d628.png"},561:function(s,t,a){s.exports=a.p+"assets/img/image-20200414221316390.0c233a5a.png"},590:function(s,t,a){"use strict";a.r(t);var n=a(15),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"技术选型之数据库选型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#技术选型之数据库选型"}},[s._v("#")]),s._v(" 技术选型之数据库选型")]),s._v(" "),n("p",[s._v("技术选型，带大家从一开始就高起点，赢在起跑线上。本章主要内容就是来比较一下常见的两种数据存储系统关系型数据库和非关系型数据库的主要特点，以及他们各自适用的场景，让我们在做出选择时不再迷茫。")]),s._v(" "),n("h2",{attrs:{id:"sql-vs-nosql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sql-vs-nosql"}},[s._v("#")]),s._v(" SQL VS NOSQL")]),s._v(" "),n("p",[s._v("数据的操作方式来看")]),s._v(" "),n("ul",[n("li",[s._v("SQL：通常是事务性数据库，且使用 SQL 操作数据\n"),n("ul",[n("li",[s._v("MySQL")]),s._v(" "),n("li",[s._v("Oracle")]),s._v(" "),n("li",[s._v("SQLServer")]),s._v(" "),n("li",[s._v("PostGreSQL")])])]),s._v(" "),n("li",[s._v("NO SQL：通常是非关系型数据库，不是用 SQL 操作数据\n"),n("ul",[n("li",[s._v("HBase")]),s._v(" "),n("li",[s._v("MongoDB")]),s._v(" "),n("li",[s._v("Redis")]),s._v(" "),n("li",[s._v("Hadoop")])])])]),s._v(" "),n("h2",{attrs:{id:"关系型数据库的特点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关系型数据库的特点"}},[s._v("#")]),s._v(" 关系型数据库的特点")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("数据结构化存储在二维表中")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("姓名")]),s._v(" "),n("th",[s._v("姓名")]),s._v(" "),n("th",[s._v("生日")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("张三")]),s._v(" "),n("td",[s._v("男")]),s._v(" "),n("td",[s._v("1980-01-28")])]),s._v(" "),n("tr",[n("td",[s._v("李四")]),s._v(" "),n("td",[s._v("男")]),s._v(" "),n("td",[s._v("1991-02-03")])])])]),s._v(" "),n("p",[s._v("随着数据库的发展，也支持将 JSON 这种非结构化的存储在表中（仅限使用 JSON 类型的列）")])]),s._v(" "),n("li",[n("p",[s._v("支持事物的 ACID 特性")]),s._v(" "),n("ul",[n("li",[s._v("A：原子性")]),s._v(" "),n("li",[s._v("C：一致性")]),s._v(" "),n("li",[s._v("I：隔离性")]),s._v(" "),n("li",[s._v("D：持久性")])])]),s._v(" "),n("li",[n("p",[s._v("支持使用 SQL 语言对存储在其中的数据进行操作")])])]),s._v(" "),n("h2",{attrs:{id:"关系数据库的使用场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关系数据库的使用场景"}},[s._v("#")]),s._v(" 关系数据库的使用场景")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("数据之间存在一定关系，需要关联查询数据的场景")]),s._v(" "),n("p",[s._v("如：一个订单，有多个商品")])]),s._v(" "),n("li",[n("p",[s._v("需要事物支持的业务场景")]),s._v(" "),n("p",[s._v("如：电商、金融类的场景")])]),s._v(" "),n("li",[n("p",[s._v("需要使用 SQL 语言灵活操作数据的场景")])])]),s._v(" "),n("h2",{attrs:{id:"非关系数据库的特点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#非关系数据库的特点"}},[s._v("#")]),s._v(" 非关系数据库的特点")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("存储结构灵活，没有固定的结构")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"姓名"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"张三"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"性别"')]),s._v("："),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"男"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"姓名"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"张三"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"性别"')]),s._v("："),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"男"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"生日"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2010-02-01"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("比较灵活，可以随意新增字段")])]),s._v(" "),n("li",[n("p",[s._v("对事物的支持比较弱，但对数据的并发处理性能高")])]),s._v(" "),n("li",[n("p",[s._v("大多不使用 SQL 语言操作数据")])])]),s._v(" "),n("h2",{attrs:{id:"非关系数据库的适用场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#非关系数据库的适用场景"}},[s._v("#")]),s._v(" 非关系数据库的适用场景")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("数据库结构不固定的场景")]),s._v(" "),n("p",[s._v("比如：某些产品有长宽属性，某些产品有颜色、味道等属性")])]),s._v(" "),n("li",[n("p",[s._v("对事物要求不高，但读写并发比较大的场景")]),s._v(" "),n("p",[s._v("比如：日志监控类、用户行为分析类")])]),s._v(" "),n("li",[n("p",[s._v("对数据的处理操作比较简单的场景")]),s._v(" "),n("p",[s._v("由于不支持 SQL 语言，在一定程度上没有 SQL 这么灵活查询，表关联等")])])]),s._v(" "),n("h2",{attrs:{id:"关系数据库选型原则"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关系数据库选型原则"}},[s._v("#")]),s._v(" 关系数据库选型原则")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("数据库使用的广泛性")]),s._v(" "),n("p",[s._v("当出现问题的时候，有足够多的资料支持，使用广泛，表示认可程度较高")])]),s._v(" "),n("li",[n("p",[s._v("数据库的可扩展性")]),s._v(" "),n("p",[s._v("数据库性能一般决定了系统的性能，是否有足够的性能和可扩展性，尤为重要")])]),s._v(" "),n("li",[n("p",[s._v("数据库的安全性和稳定性")])]),s._v(" "),n("li",[n("p",[s._v("数据库所支持的系统")]),s._v(" "),n("p",[s._v("能否支持我们服务器操作系统的版本，因为某些服务器系统是需要收费的")])]),s._v(" "),n("li",[n("p",[s._v("数据库的使用成本")]),s._v(" "),n("p",[s._v("首先是软件的使用成本，是否收费？是否比较容易找到数据库运维人员和开发人员")])])]),s._v(" "),n("h3",{attrs:{id:"mysql-使用的广泛性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql-使用的广泛性"}},[s._v("#")]),s._v(" MySQL 使用的广泛性")]),s._v(" "),n("p",[s._v("可通过 "),n("a",{attrs:{href:"https://db-engines.com/en/ranking",target:"_blank",rel:"noopener noreferrer"}},[s._v("榜单"),n("OutboundLink")],1),s._v(" 来获取")]),s._v(" "),n("p",[n("img",{attrs:{src:a(560),alt:"image-20200413230903756"}})]),s._v(" "),n("h3",{attrs:{id:"mysql-可扩展性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql-可扩展性"}},[s._v("#")]),s._v(" MySQL 可扩展性")]),s._v(" "),n("ul",[n("li",[s._v("支持基于二进制日志的逻辑复制")]),s._v(" "),n("li",[s._v("存在多种第三方数据库中间层，支持读写分离及分库分表")])]),s._v(" "),n("h3",{attrs:{id:"mysql安全性和稳定性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql安全性和稳定性"}},[s._v("#")]),s._v(" MySQL安全性和稳定性")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("MySQL 主从复制集群可达 99% 的可用性")])]),s._v(" "),n("li",[n("p",[s._v("配合主从复制高可用架构可达 99.99% 的可用性")])]),s._v(" "),n("li",[n("p",[s._v("支持对存储在 MySQL 的数据进行分级安全控制")]),s._v(" "),n("p",[s._v("比如：对数据库实例、表等层面进行权限的控制")])])]),s._v(" "),n("h3",{attrs:{id:"mysql-所支持的系统"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql-所支持的系统"}},[s._v("#")]),s._v(" MySQL 所支持的系统")]),s._v(" "),n("ul",[n("li",[s._v("Linux 系统")]),s._v(" "),n("li",[s._v("windows 系统")])]),s._v(" "),n("h3",{attrs:{id:"mysql的使用成本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql的使用成本"}},[s._v("#")]),s._v(" MySQL的使用成本")]),s._v(" "),n("ul",[n("li",[s._v("社区版本免费")]),s._v(" "),n("li",[s._v("使用人员众多，可以方便的获取技术支持")])]),s._v(" "),n("h2",{attrs:{id:"实战环境部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实战环境部署"}},[s._v("#")]),s._v(" 实战环境部署")]),s._v(" "),n("p",[s._v("使用 VirtualBox 来安装 CentOS7 系统，这部分请参考笔者的 "),n("a",{attrs:{href:"https://zq99299.github.io/linux-tutorial/tutorial-basis/03/02.html#%E5%BC%80%E5%A7%8B%E5%AE%89%E8%A3%85-centos-7",target:"_blank",rel:"noopener noreferrer"}},[s._v("另外一个笔记章节"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"mysql-yum-安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql-yum-安装"}},[s._v("#")]),s._v(" MySql Yum 安装")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("视频中安装是采用通用包安装（下载 "),n("code",[s._v("*.tar.xz")]),s._v("，解压后，配置一些文件，找到启动程序，就可以启动了）")]),s._v(" "),n("p",[s._v("由于刚学完 "),n("a",{attrs:{href:"https://github.com/zq99299/linux-tutorial",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linux 基础篇"),n("OutboundLink")],1),s._v("，知道 yum 安装的优点等，笔者这里采用 Yum 在线装，并且告知怎么从官网获取安装方式")])]),s._v(" "),n("p",[s._v("在官方参考手册中找到 "),n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/installing.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("install 章节"),n("OutboundLink")],1),s._v("，再继续找你适合你系统的安装说明，我这里选择了 "),n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/linux-installation.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("linux 安装"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("img",{attrs:{src:a(561),alt:"image-20200414221316390"}})]),s._v(" "),n("p",[s._v("打开它对应的 "),n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/linux-installation-yum-repo.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装文档"),n("OutboundLink")],1),s._v("，找到 「Table 2.11 MySQL Installation Layout for Linux RPM Packages from the MySQL Developer Zone」一栏，里面解释了安装软件后的重要文件在什么位置，比如它的配置文件在 "),n("code",[s._v("/etc/my.cnf")])]),s._v(" "),n("p",[s._v("安装：由于在实践过程中，直接从存储库下载的 RPM 包，有很多的依赖需要解决，安装起来很麻烦，下面使用 yum 方式安装，上表中也有 yum 的安装说明，下面直接开始操作")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir mysql-install")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd mysql-install")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study mysql-install"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget https://repo.mysql.com//mysql80-community-release-el7-3.noarch.rpm")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study mysql-install"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum localinstall mysql80-community-release-el7-3.noarch.rpm")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用软件库")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study mysql-install"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# yum repolist enabled | grep "mysql.*-community.*"')]),s._v("\nmysql-connectors-community/x86_64       MySQL Connectors Community           "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("141")]),s._v("\nmysql-tools-community/x86_64            MySQL Tools Community                "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("105")]),s._v("\nmysql80-community/x86_64                MySQL "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(" Community Server           "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("161")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开始安装")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install mysql-community-server")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在安装处理依赖关系时，会报错，说移除 mariadb-server 有问题，我们手动移除下")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum remove mariadb-server")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 就可以安装了")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install mysql-community-server")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 问题就是，yum 在线安装，没有翻墙的话，下载特别慢")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("启动/停止等")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("start"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("stop"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("restart"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" mysqld\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("基于没有翻墙原因，这里暂时不折腾了，也发现通用包也有通用包的一些优点，先跟着书上的做，目前到这里，也应该学会了怎么在官方找安装文档，跟着文档步骤来完成安装，使你不再迷茫；")]),s._v(" "),n("p",[s._v("注：有关 yum 的详细使用 "),n("a",{attrs:{href:"https://zq99299.github.io/linux-tutorial/tutorial-basis/22/03.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("请参考该文章"),n("OutboundLink")],1),s._v("，关于 "),n("a",{attrs:{href:"https://zq99299.github.io/linux-tutorial/tutorial-basis/22/03.html#%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E7%AB%99%EF%BC%88%E4%BB%93%E5%BA%93%E6%BA%90%EF%BC%89",target:"_blank",rel:"noopener noreferrer"}},[s._v("国内仓库源的替换请参考该文章"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"mysql-通用包（二进制）安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql-通用包（二进制）安装"}},[s._v("#")]),s._v(" MySql 通用包（二进制）安装")]),s._v(" "),n("p",[s._v("在上一小节中的列表中，打开 "),n("a",{attrs:{href:"https://downloads.mysql.com/archives/community/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Download"),n("OutboundLink")],1),s._v(" 打开的下载页面中，选择系统栏中选中 「Linux - Generic」，就可以下载 "),n("code",[s._v("mysql-8.0.15-linux-glibc2.12-x86_64.tar.xz")]),s._v(" ，如果是因为翻墙的原因下载速度很慢，那么可以在百度上去找这个版本的下载包下载")]),s._v(" "),n("p",[s._v("另外通用包安装说明信息也在上表中列出了，这里是该 "),n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/binary-installation.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("地址"),n("OutboundLink")],1),s._v("，笔者看了下，视频上面创建 mysql 用户等这些操作都是在这个安装说明页面有详细的操作步骤")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /usr/local")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 userdel mysql，会提示 groupadd: group 'mysql' already exists")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 因为 mysql 账户被默认的 MariaDB 创建了，我们这里删除该账户，本来也不打算使用 MariaDB")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# userdel mysql")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除 MariaDB ，并删除遗留的配置文件; 这里可以通过 rpm -qc 查询用到的文件，然后删除后，把遗留的文件删除")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qa | grep Maria*")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum -y remove mari*")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -rf /etc/my.cnf.d")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -rf /etc/my.cnf")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm -rf /var/lib/mysql/*")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# groupadd mysql")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建为系统账户，并给 mysql 账户赋值初始组为 mysql 组")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# useradd -r -g mysql -s /bin/false mysql")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压包")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar xvf mysql-8.0.15-linux-glibc2.12-x86_64.tar.xz")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个符号链接，方便操作的时候直接使用 mysql 这个符号链接进入一长串的版本目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ln -s mysql-8.0.15-linux-glibc2.12-x86_64 mysql")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll -d mysql*")]),s._v("\nlrwxrwxrwx. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":40 mysql -"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mysql-8.0.15-linux-glibc2.12-x86_64\ndrwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" root root       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172")]),s._v(" Apr "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":39 mysql-8.0.15-linux-glibc2.12-x86_64\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到 mysql 符号链接到了这个带版本的目录，这个下面就是解压后的目录文件了")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更改目录文件为 mysql 账户所属和权限，使用该账户运行时，才会有响应的文件读写权限")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd mysql")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chown -R mysql:mysql ./*")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod -R 750 ./*")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以下部分是安装后的设置和测试了")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对应的含义同样在页面中找到的引导地址为 https://dev.mysql.com/doc/refman/8.0/en/postinstallation.html 有兴趣可以去详细阅读")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用服务器初始化数据目录，包括 mysql 包含初始 MySQL 授权表的架构，该表确定如何允许用户连接到服务器")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study mysql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bin/mysqld --initialize --user=mysql")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-04-15T03:26:29.888347Z "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("System"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MY-013169"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" /usr/local/mysql-8.0.15-linux-glibc2.12-x86_64/bin/mysqld "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mysqld "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".15"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" initializing of server "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" progress as process "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4678")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-04-15T03:26:47.135233Z "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Note"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MY-010454"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" A temporary password is generated "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" root@localhost: qkIZ7fn"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("BJ"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("g\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 看到上述信息，默认创建了一个 root 账户，和一个随机密码")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-04-15T03:26:56.262791Z "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("System"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MY-013170"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" /usr/local/mysql-8.0.15-linux-glibc2.12-x86_64/bin/mysqld "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mysqld "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".15"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" initializing of server has completed\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 mysql")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study mysql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bin/mysqld_safe --user=mysql &      ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4981")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动日志可以看到在以下的文件下，是否启动成功等，可以查看该文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study mysql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Logging to '/usr/local/mysql/data/study.centos.mrcode.err'.")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-04-15T03:30:22.891681Z mysqld_safe Starting mysqld daemon with databases from /usr/local/mysql/data\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study mysql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps aux | grep mysql")]),s._v("\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4981")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9700")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1504")]),s._v(" pts/0    S    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":30   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 /bin/sh bin/mysqld_safe --user"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql\nmysql     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5051")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.4")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.9")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1349964")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("390000")]),s._v(" pts/0  Sl   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":30   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":03 /usr/local/mysql/bin/mysqld --basedir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql --datadir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/data --plugin-dir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/lib/plugin --user"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql --log-error"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("study.centos.mrcode.err --pid-file"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("study.centos.mrcode.pid\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这样是使用默认配置启动的 mysql 服务，的确也看到了进程")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 链接到服务器")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study mysql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# bin/mysql -u root -p             ")]),s._v("\nEnter password:    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里输入上面生成的随机密码 qkIZ7fn>BJ<g")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录成功后，给 root 用户重新分配密码")]),s._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ALTER "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" IDENTIFIED BY "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root123456'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" rows affected "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.06")]),s._v(" sec"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置 root 用户可以通过非本机 IP 链接到 mysql 服务")]),s._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" CREATE "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" IDENTIFIED BY "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置新增用户的权限")]),s._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" grant all privileges on *.* to "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 刷新权限")]),s._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" flush privileges"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 随机启动配置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 二进制安装模式下，官方默认提供了 System V 的服务管理方式的脚本文件，只需要复制到 init.d 目录下即可")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study mysql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cp support-files/mysql.server /etc/init.d/mysql.server")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置 mysql 命令的环境变量，上述需要 bin 下执行 mysql，配置后不需要绝对路径了")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 同样，为了养成良好的习惯，我们这样做，专门建立一个环境变量的配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /etc/profile.d/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study profile.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim myenv.sh")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(":/usr/local/mysql/bin\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study profile.d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# source myenv.sh")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br")])]),n("p",[n("a",{attrs:{href:"https://zq99299.github.io/linux-tutorial/tutorial-basis/17/01.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("System V 的 init 管理知识请参考这里"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"mysql-端口放行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql-端口放行"}},[s._v("#")]),s._v(" MySQL 端口放行")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看防火墙是否运行，这里看到是运行状态")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl status firewalld")]),s._v("\n● firewalld.service - firewalld - dynamic firewall daemon\n   Loaded: loaded "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/usr/lib/systemd/system/firewalld.service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" enabled"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" vendor preset: enabled"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   Active: active "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("running"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" since 三 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-04-15 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":26:27 CST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 2h 50min ago\n     Docs: man:firewalld"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n Main PID: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1012")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("firewalld"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   CGroup: /system.slice/firewalld.service\n           └─1012 /usr/bin/python2 -Es /usr/sbin/firewalld --nofork --nopid\n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("月 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":26:22 study.centos.mrcode systemd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Starting firewalld - dynamic firewall daemon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("月 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":26:27 study.centos.mrcode systemd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Started firewalld - dynamic firewall daemon.\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看开放的端口")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# firewall-cmd --list-all")]),s._v("\npublic "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("active"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  target: default\n  icmp-block-inversion: no\n  interfaces: enp0s3 enp0s8\n  sources:\n  services: dhcpv6-client "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ftp")]),s._v(" http https "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n  ports: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("222")]),s._v("/tcp "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("555")]),s._v("/tcp\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里没有 3306 端口，说没有放行该端口")]),s._v("\n  protocols:\n  masquerade: no\n  forward-ports:\n  source-ports:\n  icmp-blocks:\n  rich rules:\n\trule "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("family")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ipv4"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("address")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.1.0/24"')]),s._v(" accept\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开放端口，和重新加载防火墙配置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# firewall-cmd --zone=public --add-port=3306/tcp --permanent")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# firewall-cmd --reload")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br")])]),n("h3",{attrs:{id:"mysql-配置文件与-system-v-启动-重启操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql-配置文件与-system-v-启动-重启操作"}},[s._v("#")]),s._v(" MySQL 配置文件与 System V 启动/重启操作")]),s._v(" "),n("ul",[n("li",[s._v("该页面讲解了"),n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/mysql-server.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("怎么使用 System V 的操作"),n("OutboundLink")],1)]),s._v(" "),n("li",[s._v("配置规则：暂未在官方找到相应的页面")])]),s._v(" "),n("p",[n("code",[s._v("/etc/my.cnf")]),s._v(" 创建该配置文件，定义配置")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nuser "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" mysql\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定运行 mysql 用户")]),s._v("\nbind-address "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 允许任何 IP 链接到服务器")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误日志")]),s._v("\nlog_error "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /usr/local/mysql/sql_log/mysql-error.log\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("System V 的操作")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 由于配置文件是后追加的，所以需要手动创建好部分目录或文件，才能启动成功，并且修改为 mysql 用户的所属权限")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir/usr/local/mysql/sql_log/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chown -R mysql:mysql /usr/local/mysql/sql_log/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod -R 750 /usr/local/mysql/sql_log/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /usr/local/mysql/sql_log/")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study sql_log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch mysql-error.log")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study sql_log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chown -R mysql:mysql mysql-error.log")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study sql_log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod -R 750 mysql-error.log")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\n/etc/init.d/mysql.server start\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止")]),s._v("\n/etc/init.d/mysql.server stop\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>如何使用 Docker 虚拟机 | MySQL 系列教程（笔记）</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="MySQL 系列教程学习笔记">
    <link rel="preload" href="/mysql-tutorial/assets/css/0.styles.bc63ebf5.css" as="style"><link rel="preload" href="/mysql-tutorial/assets/js/app.7ac7a46f.js" as="script"><link rel="preload" href="/mysql-tutorial/assets/js/2.ea6cbf3c.js" as="script"><link rel="preload" href="/mysql-tutorial/assets/js/11.872c19a6.js" as="script"><link rel="preload" href="/mysql-tutorial/assets/js/35.02d8d681.js" as="script"><link rel="prefetch" href="/mysql-tutorial/assets/js/10.eb889e78.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/100.b0d6cb24.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/101.68f256ea.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/102.42508460.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/103.30ab3ade.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/104.02cd592d.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/105.a55d0266.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/106.51c1333a.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/107.6ee65580.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/108.3e57bc70.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/109.346ab313.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/110.8569dd9d.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/111.e86e73e3.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/112.2421501e.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/113.f02f2692.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/114.0d5c0792.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/115.c28b2655.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/116.0d714f60.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/117.eee09bb4.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/118.0878902d.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/119.4a2cb1c8.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/12.7b34a2a4.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/120.d0c99b93.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/121.18dae225.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/122.eaa27d9b.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/123.6886eff2.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/124.00c94f88.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/125.05b390aa.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/126.e6f8cb24.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/127.066b8c8e.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/128.cd014ece.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/129.cd0d2980.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/13.b36d3865.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/130.4b8f634d.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/131.640873ee.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/132.f2f50298.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/133.b2fcecd7.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/134.e3dfa05b.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/135.4d1e6d65.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/136.1f198051.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/137.442b21ff.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/138.7c56c6c4.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/139.88b3947c.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/14.75ec6199.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/140.094f3cc3.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/141.f15bb54e.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/142.174b365e.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/143.865c5dfe.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/144.7c97ba97.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/15.d58c5f86.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/16.d28c56a9.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/17.098395ed.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/18.bc634dc6.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/19.1845bec7.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/20.d107c76b.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/21.0dc7a8b0.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/22.80842d5f.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/23.d720acec.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/24.284e4246.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/25.67c9e135.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/26.b6508801.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/27.84732078.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/28.ad4e2160.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/29.bbfd091e.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/3.3eb1b8be.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/30.0ab31ac3.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/31.a7bbc554.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/32.69380177.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/33.364ffb0d.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/34.07624a4c.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/36.e98cc8a8.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/37.3e6d2bb9.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/38.51f7d952.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/39.6657e4df.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/4.b0b44883.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/40.07d8b206.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/41.ec985641.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/42.da65feb7.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/43.330ad3c9.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/44.2355b352.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/45.ba08d784.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/46.b78a4275.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/47.c756152f.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/48.c42d9832.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/49.88d244ad.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/5.6e26806a.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/50.1a8b3116.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/51.82b4b7c9.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/52.6c7a84fc.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/53.54cfc776.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/54.b88653b2.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/55.8eb80e3d.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/56.7097d49c.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/57.f36d4c29.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/58.99256047.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/59.ce9d9bd9.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/6.33ab76f3.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/60.94d846d4.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/61.d94b8cf0.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/62.42da86d6.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/63.acf645d3.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/64.04e4e46f.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/65.027d53b0.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/66.7c6a4b84.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/67.4a8e6a48.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/68.2fb45341.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/69.211e34e2.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/7.77e5cd7e.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/70.d260b2c6.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/71.c1d449e1.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/72.d8579221.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/73.36783afb.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/74.1153775a.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/75.7178c973.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/76.1e35b783.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/77.2589f8a5.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/78.b0fb34cd.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/79.ef753dea.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/8.ce2e5257.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/80.eaaee2ec.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/81.61ca7dc8.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/82.43e64cec.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/83.7696a4c5.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/84.9caf1161.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/85.6fbd6ba8.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/86.69a754a8.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/87.367c2636.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/88.58f2fc2f.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/89.9d054267.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/9.686bf3d9.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/90.81c6e1b0.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/91.85996cd8.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/92.879e44f2.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/93.c9244990.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/94.047f2491.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/95.208cbcef.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/96.e82bb3b9.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/97.d3f65d2e.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/98.581f6d36.js"><link rel="prefetch" href="/mysql-tutorial/assets/js/99.6f9c5b8b.js">
    <link rel="stylesheet" href="/mysql-tutorial/assets/css/0.styles.bc63ebf5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mysql-tutorial/" class="home-link router-link-active"><!----> <span class="site-name">MySQL 系列教程（笔记）</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mysql-tutorial/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="给程序员的 MySQL 8 必知必会" class="dropdown-title"><span class="title">给程序员的 MySQL 8 必知必会</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/" class="nav-link">
  导览
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/01.html" class="nav-link">
  课程序言
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/02/" class="nav-link">
  技术选型之数据库选型
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/03/" class="nav-link">
  数据库设计
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/04/" class="nav-link">
  如何访问 MySQL
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/05/" class="nav-link">
  日常工作 DCL、DDL
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/06/" class="nav-link">
  高阶技能：DML &amp; 常用函数
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/07/" class="nav-link">
  SQL 优化
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/08/" class="nav-link">
  SQL 的索引优化
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/09/" class="nav-link">
  事务与并发控制
</a></li></ul></div></div><div class="nav-item"><a href="/mysql-tutorial/ali-new-retail/" class="nav-link router-link-active">
  阿里新零售数据库设计与实战
</a></div><div class="nav-item"><a href="/mysql-tutorial/high-performance/" class="nav-link">
  高性能 MySQL（第 3 版）
</a></div><div class="nav-item"><a href="https://github.com/zq99299/repository-summary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记精选汇总
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/zq99299/mysql-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mysql-tutorial/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="给程序员的 MySQL 8 必知必会" class="dropdown-title"><span class="title">给程序员的 MySQL 8 必知必会</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/" class="nav-link">
  导览
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/01.html" class="nav-link">
  课程序言
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/02/" class="nav-link">
  技术选型之数据库选型
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/03/" class="nav-link">
  数据库设计
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/04/" class="nav-link">
  如何访问 MySQL
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/05/" class="nav-link">
  日常工作 DCL、DDL
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/06/" class="nav-link">
  高阶技能：DML &amp; 常用函数
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/07/" class="nav-link">
  SQL 优化
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/08/" class="nav-link">
  SQL 的索引优化
</a></li><li class="dropdown-item"><!----> <a href="/mysql-tutorial/imooc-mysql8/09/" class="nav-link">
  事务与并发控制
</a></li></ul></div></div><div class="nav-item"><a href="/mysql-tutorial/ali-new-retail/" class="nav-link router-link-active">
  阿里新零售数据库设计与实战
</a></div><div class="nav-item"><a href="/mysql-tutorial/high-performance/" class="nav-link">
  高性能 MySQL（第 3 版）
</a></div><div class="nav-item"><a href="https://github.com/zq99299/repository-summary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记精选汇总
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/zq99299/mysql-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/mysql-tutorial/ali-new-retail/" class="sidebar-link">阿里新零售数据库设计与实战</a></li><li><a href="/mysql-tutorial/ali-new-retail/01/" class="sidebar-link">开门见山</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前置准备</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前导知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>新零售数据结构设计</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常见问题与企业级解决方案-初级</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常见问题与企业级解决方案-进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常见问题与企业级解决方案-高阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>新零售系统数据库性能调优</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>新零售平台的数据库集群</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mysql-tutorial/ali-new-retail/09/" class="sidebar-link">新零售平台的数据库集群</a></li><li><a href="/mysql-tutorial/ali-new-retail/09/01.html" class="sidebar-link">数据库集群能解决什么问题？</a></li><li><a href="/mysql-tutorial/ali-new-retail/09/02.html" class="active sidebar-link">如何使用 Docker 虚拟机</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mysql-tutorial/ali-new-retail/09/02.html#docker-与-vm-虚拟机对比" class="sidebar-link">Docker 与 vm 虚拟机对比</a></li><li class="sidebar-sub-header"><a href="/mysql-tutorial/ali-new-retail/09/02.html#可以不安装虚拟机吗？" class="sidebar-link">可以不安装虚拟机吗？</a></li><li class="sidebar-sub-header"><a href="/mysql-tutorial/ali-new-retail/09/02.html#云计算中的-docker-虚拟机" class="sidebar-link">云计算中的 Docker 虚拟机</a></li><li class="sidebar-sub-header"><a href="/mysql-tutorial/ali-new-retail/09/02.html#docker-镜像" class="sidebar-link">Docker 镜像</a></li><li class="sidebar-sub-header"><a href="/mysql-tutorial/ali-new-retail/09/02.html#docker-容器" class="sidebar-link">Docker 容器</a></li><li class="sidebar-sub-header"><a href="/mysql-tutorial/ali-new-retail/09/02.html#安装-docker-虚拟机" class="sidebar-link">安装 Docker 虚拟机</a></li><li class="sidebar-sub-header"><a href="/mysql-tutorial/ali-new-retail/09/02.html#docker-虚拟机管理命令" class="sidebar-link">Docker 虚拟机管理命令</a></li><li class="sidebar-sub-header"><a href="/mysql-tutorial/ali-new-retail/09/02.html#设置镜像加速器" class="sidebar-link">设置镜像加速器</a></li><li class="sidebar-sub-header"><a href="/mysql-tutorial/ali-new-retail/09/02.html#演示" class="sidebar-link">演示</a></li><li class="sidebar-sub-header"><a href="/mysql-tutorial/ali-new-retail/09/02.html#镜像的导入与导出" class="sidebar-link">镜像的导入与导出</a></li><li class="sidebar-sub-header"><a href="/mysql-tutorial/ali-new-retail/09/02.html#创建容器命令" class="sidebar-link">创建容器命令</a></li><li class="sidebar-sub-header"><a href="/mysql-tutorial/ali-new-retail/09/02.html#容器的启动-退出-暂停-恢复" class="sidebar-link">容器的启动/退出/暂停/恢复</a></li></ul></li><li><a href="/mysql-tutorial/ali-new-retail/09/03.html" class="sidebar-link">分布式 Docker 环境</a></li><li><a href="/mysql-tutorial/ali-new-retail/09/04.html" class="sidebar-link">搭建 PXC 集群</a></li><li><a href="/mysql-tutorial/ali-new-retail/09/05.html" class="sidebar-link">搭建 Replication 集群</a></li><li><a href="/mysql-tutorial/ali-new-retail/09/06.html" class="sidebar-link">本章总结</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分库分表的 N 种姿势</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/mysql-tutorial/ali-new-retail/11/" class="sidebar-link">集群环境下的新零售数据库与总结</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>升级内容</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="如何使用-docker-虚拟机"><a href="#如何使用-docker-虚拟机" class="header-anchor">#</a> 如何使用 Docker 虚拟机</h1> <h2 id="docker-与-vm-虚拟机对比"><a href="#docker-与-vm-虚拟机对比" class="header-anchor">#</a> Docker 与 vm 虚拟机对比</h2> <p>Docker 是免费的虚拟机引擎，可以为任何应用创建一个轻量级的可移植的容器</p> <p><img src="/mysql-tutorial/assets/img/image-20200614213149887.b1292f3d.png" alt="image-20200614213149887"></p> <p><img src="/mysql-tutorial/assets/img/image-20200614213202049.6980fe7f.png" alt="image-20200614213202049"></p> <p>总的来说，Docker 在批量集群方面，就是快、方便</p> <h2 id="可以不安装虚拟机吗？"><a href="#可以不安装虚拟机吗？" class="header-anchor">#</a> 可以不安装虚拟机吗？</h2> <p>Docker 是跨平台的轻量级虚拟机，Win10 和 MacOS 都可以安装 Docker，<img src="/mysql-tutorial/assets/img/image-20200614213454879.2596378a.png" alt="image-20200614213454879"></p> <p>但是我们需要用到虚拟 IP，这个只有 Linux 才支持。所以还是安装虚拟机把。</p> <h2 id="云计算中的-docker-虚拟机"><a href="#云计算中的-docker-虚拟机" class="header-anchor">#</a> 云计算中的 Docker 虚拟机</h2> <p><img src="/mysql-tutorial/assets/img/image-20200614213614537.c79f68a9.png" alt="image-20200614213614537"></p> <p>因为Docker 是轻量级的虚拟机，一台服务器可以跑几百上千个虚拟的实例，所以有很多厂商就出售这些实例，这就是 <strong>云计算的虚拟云主机</strong> ；</p> <p>云又分为：</p> <ul><li><p>Saas</p> <p>为客户提供完整的云端产品（如进销存、财务系统等），用户购买云主机时，挑选需要哪些产品，运营商就立即给你构建这套软件系统，对很多非技术性的中小企业是很有帮助的：不需要自己搭建环境，也不需要找人开发</p></li> <li><p>PaaS</p> <p>为客户提供服务，客户自己把这些服务整合成产品；</p> <p>比如事先把 redis、mysql、MongoDB 等部署到虚拟的实例上，再开发一套管理系统，如果客户需要使用云端数据库服务，那么就卖给你数据库服务</p> <p>PaaS 云适合中小型的技术企业，通过购买运营商提供的基础服务，完成自己的云端引用程序的开发</p></li></ul> <p>无论是哪一种云，都需要用到 Docker 虚拟机</p> <h2 id="docker-镜像"><a href="#docker-镜像" class="header-anchor">#</a> Docker 镜像</h2> <p>Docker 虚拟机的镜像是一个<strong>只读层</strong>，不能写入数据。</p> <p>我们可以通过 dockerfile 文件，定义需要安装的程序（如 MySQL），然后创建出镜像文件。</p> <p>在 Docker 仓库中已经存在了一些别人已经制作好的镜像，比如 java 环境。</p> <p><img src="/mysql-tutorial/assets/img/image-20200614214714808.8bf5332f.png" alt="image-20200614214714808"></p> <p>由于镜像是只读的，想要存储一些数据，就需要创建容器。</p> <h2 id="docker-容器"><a href="#docker-容器" class="header-anchor">#</a> Docker 容器</h2> <p>Docker 容器是一个 <strong>虚拟机的实例</strong>，里面的内容可读可写。且容器是 <strong>完全隔离</strong> 的，我们不用担心部署程序会相互干扰。</p> <p>一个镜像可以创建出多个容器。</p> <p><img src="/mysql-tutorial/assets/img/image-20200614214903784.fa1759ab.png" alt="image-20200614214903784"></p> <h2 id="安装-docker-虚拟机"><a href="#安装-docker-虚拟机" class="header-anchor">#</a> 安装 Docker 虚拟机</h2> <p>首先我们需要多搞几台 vm 的虚拟机出来，这些 vm 虚拟机的硬件配置可以稍微提高一点，因为一台 linux 服务器里面可以跑很多个 docker 虚拟机；</p> <p>在 CentOS 上安装 Docker 虚拟机</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>yum install <span class="token operator">-</span>y docker
service docker <span class="token keyword">start</span>
service docker stop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="docker-虚拟机管理命令"><a href="#docker-虚拟机管理命令" class="header-anchor">#</a> Docker 虚拟机管理命令</h2> <p>下面是 docker 的一些常用命令</p> <p><img src="/mysql-tutorial/assets/img/image-20200614223408493.ce845f33.png" alt="image-20200614223408493"></p> <ul><li><p>build：从 DockerFile 构建一个镜像</p></li> <li><p>search：搜索 Docker 仓库有哪些可用的镜像</p> <p>如果不想自己 build 镜像，就可以查看有哪些别人制作好的</p></li> <li><p>pull：从远程把镜像，下载到本地</p></li> <li><p>push：将我们自己创建的镜像发布到仓库</p></li> <li><p>images：查看本地存放了哪些镜像</p></li> <li><p>rmi：删除一个镜像</p> <p>前提是，把与该镜像关联的容器都删除</p></li> <li><p>save：将本地的镜像导出成压缩文件</p></li> <li><p>load：将压缩文件导入到本地的 Docker 虚拟机</p></li> <li><p>run：创建容器，创建后就是运行状态的</p> <p>访问容器：可执行 exec/attach 命令</p></li> <li><p>pause/unpause：暂停或则恢复容器</p></li> <li><p>stop/start：停止容器或启动容器</p></li> <li><p>ps：查看 docker 中有多少个容器</p></li> <li><p>rm：删除容器</p></li> <li><p>commit：将容器转换成镜像</p></li></ul> <h2 id="设置镜像加速器"><a href="#设置镜像加速器" class="header-anchor">#</a> 设置镜像加速器</h2> <p>Docker 仓库在海外，访问很慢，设置为国内的镜像仓库，加快下载速度；</p> <p>这里使用 <a href="https://www.daocloud.io/mirror" target="_blank" rel="noopener noreferrer">dockerCloud 加速器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io</span>
docker version <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">1.12</span>
<span class="token punctuation">{</span><span class="token string">&quot;registry-mirrors&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;http://f1361db2.m.daocloud.io&quot;</span><span class="token punctuation">]</span>,<span class="token punctuation">}</span>
Success.
You need to restart docker to take effect: <span class="token function">sudo</span> systemctl restart docker 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>看见上面输出，多了一个逗号，需要手动编辑去掉这个逗号</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>vim <span class="token operator">/</span>etc<span class="token operator">/</span>docker<span class="token operator">/</span>daemon<span class="token punctuation">.</span>json
<span class="token comment"># 修改为下面这样，就是去掉了后面多余的逗号</span>
{<span class="token string">&quot;registry-mirrors&quot;</span>: <span class="token punctuation">[</span><span class="token string">&quot;http://f1361db2.m.daocloud.io&quot;</span><span class="token punctuation">]</span>}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>笔者这里使用 dockerCloud 还是有超时现象，这里配置下阿里云的，先进入<a href="https://cr.console.aliyun.com/" target="_blank" rel="noopener noreferrer">容器镜像服务<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>；侧边栏有一个镜像中心，找到镜像加速器；会给你一个专属的镜像加速器地址，上面文件中的地址替换掉这个，重启 docker 就可以了</p> <h2 id="演示"><a href="#演示" class="header-anchor">#</a> 演示</h2> <p>一开始笔者没有关闭 SELinux，会出现一些程序运行的权限问题，这里还是需要先关闭：<a href="https://zq99299.github.io/linux-tutorial/tutorial-basis/16/05.html#selinux-%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%90%AF%E5%8A%A8%E3%80%81%E5%85%B3%E9%97%AD%E4%B8%8E%E8%A7%82%E5%AF%9F" target="_blank" rel="noopener noreferrer">可参考这个文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>下载一个 java 镜像，创建出一个容器，部署 java 程序</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 搜索远程仓库有哪些可用的 java 镜像</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker search java</span>
INDEX       NAME                                               DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
docker.io   docker.io/node                                     Node.js is a JavaScript-based platform for<span class="token punctuation">..</span>.   <span class="token number">8925</span>      <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>       
docker.io   docker.io/tomcat                                   Apache Tomcat is an <span class="token function">open</span> <span class="token builtin class-name">source</span> implementa<span class="token punctuation">..</span>.   <span class="token number">2751</span>      <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>       
docker.io   docker.io/openjdk                                  OpenJDK is an open-source implementation o<span class="token punctuation">..</span>.   <span class="token number">2289</span>      <span class="token punctuation">[</span>OK<span class="token punctuation">]</span> 

<span class="token comment"># 上面看到了一个 openjdk</span>
<span class="token comment"># 下载该镜像</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker pull docker.io/openjdk</span>
Using default tag: latest
Trying to pull repository docker.io/library/openjdk <span class="token punctuation">..</span>. 
latest: Pulling from docker.io/library/openjdk
fa926a7d213a: Pull complete 
22aed8993d2f: Pull complete 
6f92a6635435: Pull complete 
Digest: sha256:c56c42fb84c21ebeea1c715f323b78f4160872ac6c28c32292d9cd1d29982aaf
Status: Downloaded newer image <span class="token keyword">for</span> docker.io/openjdk:latest

<span class="token comment"># 查看 docker 环境里是否有下载下来的镜像</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
docker.io/openjdk   latest              4fba8120f640        <span class="token number">3</span> days ago          <span class="token number">497</span> MB

<span class="token comment"># 创建容器 </span>
<span class="token comment"># -it:  进入容器</span>
<span class="token comment"># bash：进入容器使用哪一个命令行</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker run -it docker.io/openjdk bash</span>
bash-4.2<span class="token comment"># 									# 可以看到就进入到容器中来了</span>
<span class="token comment"># 可以看下当前是哪一个的 java 版本</span>
bash-4.2<span class="token comment"># java --version</span>
openjdk <span class="token number">14.0</span>.1 <span class="token number">2020</span>-04-14
OpenJDK Runtime Environment <span class="token punctuation">(</span>build <span class="token number">14.0</span>.1+7<span class="token punctuation">)</span>
OpenJDK <span class="token number">64</span>-Bit Server VM <span class="token punctuation">(</span>build <span class="token number">14.0</span>.1+7, mixed mode, sharing<span class="token punctuation">)</span>

<span class="token comment"># 部署程序到这个容器中，需要做一个目录映射，才能把文件传到容器中</span>
<span class="token comment"># 退出容器，在容器中执行  exit</span>

<span class="token comment"># 查看有哪些容器</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES
838eefc8ff2c        docker.io/openjdk   <span class="token string">&quot;bash&quot;</span>              <span class="token number">3</span> minutes ago       Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">12</span> seconds ago                       adoring_meitner
<span class="token comment"># 可以看到，刚刚我们退出的容器，status 的确是 exited 了</span>

<span class="token comment"># 删掉该容器,给的是容器ID</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker rm 838eefc8ff2c</span>

<span class="token comment"># 创建一个有目录容器的映射</span>
<span class="token comment"># 使用 -v 参数，有两个目录，左边的是宿主机的目录，右边的映射到容器中的目录</span>
<span class="token comment"># 映射目录，需要该目录先存着，记得先创建它</span>
<span class="token comment"># 1. 创建并进入该容器</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker run -it -v /root/java:/root/java  docker.io/openjdk bash</span>
<span class="token comment"># 2. 在 宿主机的 /root/java 目录下创建一个  Hello.java 文件</span>
<span class="token comment">#    文件内容就如下一个简单的打印</span>
class Hello<span class="token punctuation">{</span>
  public static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">#  3. 在容器中进入该目录</span>
<span class="token comment">#			发现提示权限不足，这里还是要听老师的，需要先把 SELinux 关闭; 关闭后需要重新启动机器</span>
bash-4.2<span class="token comment"># ls /root/java/</span>
ls: cannot <span class="token function">open</span> directory /root/java/: Permission denied
<span class="token comment"># 		处理完 SELinux 后，就发现能看到了</span>
bash-4.2<span class="token comment"># ls /root/java/</span>
Hello.java
bash-4.2<span class="token comment"># cd /root/java</span>
bash-4.2<span class="token comment"># javac Hello.java </span>
bash-4.2<span class="token comment"># java Hello</span>
Hello World
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><h2 id="镜像的导入与导出"><a href="#镜像的导入与导出" class="header-anchor">#</a> 镜像的导入与导出</h2> <p>某些电脑无法下载镜像（没有外网）或则下载速度很慢，可以将镜像导出成压缩文件，再导入</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 导出 </span>
docker save -o /root/openjdk.tar.gz docker.io/openjdk
<span class="token comment"># 导入 </span>
docker load <span class="token operator">&lt;</span> /root/openjdk.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这里测试的话，把本地的 openjdk 镜像删除，前提是 <strong>要把用该镜像创建出来的容器删除掉</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                       PORTS               NAMES
3f3d27fa951c        docker.io/openjdk   <span class="token string">&quot;bash&quot;</span>              <span class="token number">21</span> hours ago        Exited <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token number">2</span> minutes ago                       trusting_northcutt
<span class="token comment"># 删除容器</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker rm 3f3d27fa951c</span>
3f3d27fa951c

<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
docker.io/openjdk   latest              4fba8120f640        <span class="token number">4</span> days ago          <span class="token number">497</span> MB

<span class="token comment"># 删除镜像</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker rmi 4fba8120f640</span>
Untagged: docker.io/openjdk:latest
Untagged: docker.io/openjdk@sha256:c56c42fb84c21ebeea1c715f323b78f4160872ac6c28c32292d9cd1d29982aaf
Deleted: sha256:4fba8120f640877c7aedf93c1c862df74ee2d971786a402289099e6c08798598
Deleted: sha256:072f3a083c65224baab5ff73b3913057778d467df1860f67434ef5fbe874e05b
Deleted: sha256:21a066a950d33c4609707b20ac5a7fd4cf71b8526f0f43723b86f306469686bf
Deleted: sha256:351f02e4b003402356cd1295ec4619446767783e503cd455f39a80015538ed7e
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>最后导入刚刚导出的</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker load &lt; /root/openjdk.tar.gz</span>
351f02e4b003: Loading layer <span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token number">126.2</span> MB/126.2 MB
41f691265dc2: Loading layer <span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token number">42.66</span> MB/42.66 MB
e0b0ff63abdd: Loading layer <span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token number">335.3</span> MB/335.3 MB
Loaded image: docker.io/openjdk:latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>修改镜像名称，看命令 tag 就知道只是增加了一个标签而已， imageID 还是一样的</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker tag docker.io/openjdk openjdk</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
openjdk             latest              4fba8120f640        <span class="token number">4</span> days ago          <span class="token number">497</span> MB
docker.io/openjdk   latest              4fba8120f640        <span class="token number">4</span> days ago          <span class="token number">497</span> MB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="创建容器命令"><a href="#创建容器命令" class="header-anchor">#</a> 创建容器命令</h2> <p>创建容器时，可以 <strong>映射端口</strong>和 <strong>挂载目录</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># --name 给容器启动一个名称，名称可有可无，因为会有容器 id</span>
<span class="token comment"># 进入容器后，默认运行的是 bash 程序</span>
docker run -it --name java openjdk <span class="token function">bash</span>

<span class="token comment"># -p 做了端口映射，左侧是宿主机端口 : 右侧容器端口</span>
<span class="token comment"># 可以写多个端口映射</span>
docker run -it --name java -p <span class="token number">9000</span>:8080 -p <span class="token number">9001</span>:8085 openjdk <span class="token function">bash</span>

<span class="token comment"># -v 挂载目录</span>
<span class="token comment"># --privileged: 容器要读写目录里面的数据，需要分配最高的权限</span>
docker run -it --name java -v /root/project:/sorf --privileged openjdk <span class="token function">bash</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="容器的启动-退出-暂停-恢复"><a href="#容器的启动-退出-暂停-恢复" class="header-anchor">#</a> 容器的启动/退出/暂停/恢复</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 创建容器，并以交互模式进入 bash 程序</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker run -it docker.io/openjdk bash</span>
bash-4.2<span class="token comment"># exit			# 退出容器，那么容器也停止运行了</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES
65f855abe6dd        docker.io/openjdk   <span class="token string">&quot;bash&quot;</span>              <span class="token number">11</span> seconds ago      Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">4</span> seconds ago                       peaceful_spence

<span class="token comment"># 让容器再次运行</span>
<span class="token comment"># -i：是否以交互模式运行，如果不加 -i，那么容器会在后头模式运行</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker start -i 65f855abe6dd</span>
bash-4.2<span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>

<span class="token comment"># 后台模式运行</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker start 65f855abe6dd</span>
65f855abe6dd
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
65f855abe6dd        docker.io/openjdk   <span class="token string">&quot;bash&quot;</span>              <span class="token number">4</span> minutes ago       Up <span class="token number">5</span> seconds                            peaceful_spence

<span class="token comment"># 让容器暂停</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker pause 65f855abe6dd</span>
65f855abe6dd
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                       PORTS               NAMES
65f855abe6dd        docker.io/openjdk   <span class="token string">&quot;bash&quot;</span>              <span class="token number">5</span> minutes ago       Up About a minute <span class="token punctuation">(</span>Paused<span class="token punctuation">)</span>                       peaceful_spence
<span class="token comment"># 可以看到状态变成 pause 了</span>

<span class="token comment"># 恢复容器的运行</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker unpause 65f855abe6dd</span>
65f855abe6dd
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
65f855abe6dd        docker.io/openjdk   <span class="token string">&quot;bash&quot;</span>              <span class="token number">6</span> minutes ago       Up <span class="token number">2</span> minutes                            peaceful_spence

<span class="token comment"># 停止容器的运行</span>
<span class="token punctuation">[</span>root@study ~<span class="token punctuation">]</span><span class="token comment"># docker stop 65f855abe6dd</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zq99299/mysql-tutorial/edit/master/docs/ali-new-retail/09/02.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: :</span> <span class="time">12 days ago</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mysql-tutorial/ali-new-retail/09/01.html" class="prev">
        数据库集群能解决什么问题？
      </a></span> <span class="next"><a href="/mysql-tutorial/ali-new-retail/09/03.html">
        分布式 Docker 环境
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/mysql-tutorial/assets/js/app.7ac7a46f.js" defer></script><script src="/mysql-tutorial/assets/js/2.ea6cbf3c.js" defer></script><script src="/mysql-tutorial/assets/js/11.872c19a6.js" defer></script><script src="/mysql-tutorial/assets/js/35.02d8d681.js" defer></script>
  </body>
</html>

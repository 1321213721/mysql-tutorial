(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{457:function(s,a,t){s.exports=t.p+"assets/img/image-20200615213206621.59ad08d8.png"},458:function(s,a,t){s.exports=t.p+"assets/img/image-20200615213442608.8c1f7bd6.png"},459:function(s,a,t){s.exports=t.p+"assets/img/image-20200615213515494.e6a470ce.png"},460:function(s,a,t){s.exports=t.p+"assets/img/image-20200615215035696.2a4be92e.png"},461:function(s,a,t){s.exports=t.p+"assets/img/image-20200615215050956.b30ed4b3.png"},705:function(s,a,t){"use strict";t.r(a);var n=t(15),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"分布式-docker-环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#分布式-docker-环境"}},[s._v("#")]),s._v(" 分布式 Docker 环境")]),s._v(" "),n("h2",{attrs:{id:"集中部署的缺点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#集中部署的缺点"}},[s._v("#")]),s._v(" 集中部署的缺点")]),s._v(" "),n("p",[s._v("把数据库集群都部署在一个 Docker 上不是一个好办法，如果宿主机宕机了，那么每个 MySQL 节点都不能使用了")]),s._v(" "),n("p",[n("img",{attrs:{src:t(457),alt:"image-20200615213206621"}})]),s._v(" "),n("h2",{attrs:{id:"分布式部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#分布式部署"}},[s._v("#")]),s._v(" 分布式部署")]),s._v(" "),n("p",[s._v("分布式部署，首先要解决的就是虚拟机组网的问题，"),n("strong",[s._v("Docker Swarm")]),s._v(" 技术可以 "),n("strong",[s._v("自动把异地的 Docker 虚拟机组成一个局域网")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(458),alt:"image-20200615213442608"}})]),s._v(" "),n("h2",{attrs:{id:"创建多个-vm-实例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建多个-vm-实例"}},[s._v("#")]),s._v(" 创建多个 VM 实例")]),s._v(" "),n("p",[n("img",{attrs:{src:t(459),alt:"image-20200615213515494"}})]),s._v(" "),n("p",[s._v("比如创建 4 个实例，然后使用 Swarm 把这 4 台组成一个区域网")]),s._v(" "),n("p",[s._v("可以利用现有的虚拟机，克隆出来，在这之前，我们先删除之前的存在的容器实例后再克隆。")]),s._v(" "),n("p",[s._v("笔者使用的是 Oracle VM VirtualBox，克隆很简单了:")]),s._v(" "),n("p",[s._v("修改你要复制新的虚拟机名称")]),s._v(" "),n("p",[n("img",{attrs:{src:t(460),alt:"image-20200615215035696"}})]),s._v(" "),n("p",[n("img",{attrs:{src:t(461),alt:"image-20200615215050956"}})]),s._v(" "),n("p",[s._v("等待 2 分钟左右就可以使用了，"),n("strong",[s._v("唯一需要修改就是：")]),s._v(" 复制后的虚拟机启动后，网络 IP 被设置为了自动模式，需要手动修改成手动模式")]),s._v(" "),n("h2",{attrs:{id:"创建-swarm-集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建-swarm-集群"}},[s._v("#")]),s._v(" 创建 Swarm 集群")]),s._v(" "),n("p",[s._v("很简单，在某一个 docker 节点上执行 "),n("code",[s._v("docker swarm init")]),s._v(" 命令，swarm 集群就创建出来了，并且当前的 docker 节点会自动加入到 swarm 集群，成为集群的管理节点")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker swarm init")]),s._v("\nError response from daemon: could not choose an IP address to advertise since this system has multiple addresses on different interfaces "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".2.105 on enp0s3 and "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.105 on enp0s8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - specify one with --advertise-addr\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 由于笔者 mac 虚拟机上为了链接外网，使用了两张网卡的方式，这里需要指定网卡")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里我选择 enp0s8 这张网卡")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker swarm init --advertise-addr enp0s8")]),s._v("\nSwarm initialized: current node "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dsm2a0zz66ckrrc9wkw7437lw"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" is now a manager.\n\nTo "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" a worker to this swarm, run the following command:\n\n    docker swarm "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --token SWMTKN-1-1hwraveloheai9kbgrh2r7kwonxze24275ckpa5uxhxt905gbm-ec30fb3zbn4zho8e839bnfbeg "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.105:2377\n\nTo "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" a manager to this swarm, run "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker swarm join-token manager'")]),s._v(" and follow the instructions.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("swarm 集群创建成功，告诉我们当前 105 节点是管理节点，要将其他 docker 虚拟机加入到这个 swarm 集群中，只需要在每台要加入的 docker 虚拟机上，运行那一串 join 指令就可以了;")]),s._v(" "),n("p",[s._v("注意的是：还需要放开 2377 这个端口")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("firewall-cmd --zone"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2377")]),s._v("/tcp --permanent\nfirewall-cmd --reload\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("在其他机器上执行加入命令")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker swarm join     --token SWMTKN-1-1hwraveloheai9kbgrh2r7kwonxze24275ckpa5uxhxt905gbm-ec30fb3zbn4zho8e839bnfbeg     192.168.56.105:2377")]),s._v("\nThis node joined a swarm as a worker.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("在管理 Swarm 集群的时候，很多命令需要在管理节点上执行，在 worker 节点上执行不支持。")]),s._v(" "),n("h2",{attrs:{id:"查看-swarm-集群节点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看-swarm-集群节点"}},[s._v("#")]),s._v(" 查看 Swarm 集群节点")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("docker node "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看集群节点")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除集群节点，")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  -f 是删除 AVAILABILITY 为 active 的节点；表示这台 docker 虚拟机正则运行中")]),s._v("\ndocker node "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f 节点ID\t\t\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看集群中有哪些节点")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker node ls")]),s._v("\nID                           "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOSTNAME")]),s._v("             STATUS  AVAILABILITY  MANAGER STATUS\n1468rakoih5r6v6m1gwnn5ap7    study.centos.mrcode  Ready   Active\ndsm2a0zz66ckrrc9wkw7437lw *  study.centos.mrcode  Ready   Active        Leader\ntcq2sz5ey96yzdzheh5botfg1    study.centos.mrcode  Ready   Active\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("笔者只创建了三台，删除最后一个节点")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除集群节点")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker node rm -f tcq2sz5ey96yzdzheh5botfg1")]),s._v("\ntcq2sz5ey96yzdzheh5botfg1\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意：这里删除后，在对应的主机上需要使用  docker swarm leave 指令，让我们脱离之前的集群节点")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 脱离之后才算真正离开了这个集群节点")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 所以：被管理节点移除之后的 docker 虚拟机想要重新加入 swarm 集群，也是需要先离开之前的集群")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("现在要解散 Swarm 节点，需要先删除所有的 work 节点。最后再删除管理节点")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确认 swarm 集群只剩下管理节点了")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker node ls")]),s._v("\nID                           "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOSTNAME")]),s._v("             STATUS  AVAILABILITY  MANAGER STATUS\ndsm2a0zz66ckrrc9wkw7437lw *  study.centos.mrcode  Ready   Active        Leader\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 管理节点不能删除自己，需要离开整个集群节点")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker swarm leave -f")]),s._v("\nNode left the swarm.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"查看-swarm-集群网络"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看-swarm-集群网络"}},[s._v("#")]),s._v(" 查看 Swarm 集群网络")]),s._v(" "),n("p",[s._v("前面说到，Swarm 集群会创建虚拟网络完成组网。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network ls")]),s._v("\nNETWORK ID          NAME                DRIVER              SCOPE\n3a2808fe483f        bridge              bridge              "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\nb5e6c79365f6        docker_gwbridge     bridge              "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\nf0d3258b232e        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("                "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("                "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\ni1g496sh0l2l        ingress             overlay             swarm\n6292e2b9fa41        none                null                "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("其中 SCOPE 为 swarm 的就是 swarm 创建出来的虚拟网络。该网络我们手动也可以创建")]),s._v(" "),n("h2",{attrs:{id:"创建共享网络"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建共享网络"}},[s._v("#")]),s._v(" 创建共享网络")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("docker network create -d overlay --attachable swarm_test集群名称\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network create -d overlay --attachable swarm_test")]),s._v("\nzipwmke4qboj258qxdfpgwqy9\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network ls")]),s._v("\nNETWORK ID          NAME                DRIVER              SCOPE\n3a2808fe483f        bridge              bridge              "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\nb5e6c79365f6        docker_gwbridge     bridge              "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\nf0d3258b232e        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("                "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("                "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\ni1g496sh0l2l        ingress             overlay             swarm\n6292e2b9fa41        none                null                "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\nzipwmke4qboj        swarm_test          overlay             swarm  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建出来了")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("虚拟网络的意义：由于每一个 docker 虚拟机上都可以运行成千上万的容器，如果 swarm 集群中的所有容器都运行在同一个网络中，ip 就不够分配的。")]),s._v(" "),n("p",[s._v("所以可以创建多个不同的虚拟网络，把容器划分到不同的虚拟网络中。比如，需要搭建 mysql 集群，可以把这些 mysql 容器划分到这一个虚拟网络中")]),s._v(" "),n("h2",{attrs:{id:"删除虚拟网络"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#删除虚拟网络"}},[s._v("#")]),s._v(" 删除虚拟网络")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("docker network "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" 网络名称\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network rm swarm_test")]),s._v("\nswarm_test\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"创建分布式容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建分布式容器"}},[s._v("#")]),s._v(" 创建分布式容器")]),s._v(" "),n("p",[s._v("如何在 swarm 集群中创建分布式容器，我们正常创建的容器还只是本地的容器，并没有加入到虚拟网络中。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("docker run -it --net"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("swarm_test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("如上的语法，创建容器时，使用 "),n("code",[s._v("--net")]),s._v(" 参数，将容器加入到指定的虚拟网络中；")]),s._v(" "),n("p",[s._v("后续讲解 MySQL 集群的时候，再做详细的讲解")])])}),[],!1,null,null,null);a.default=e.exports}}]);
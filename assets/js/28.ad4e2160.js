(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{409:function(t,a,s){t.exports=s.p+"assets/img/image-20200607140909217.b8e7d535.png"},410:function(t,a,s){t.exports=s.p+"assets/img/image-20200607141059856.333443fd.png"},411:function(t,a,s){t.exports=s.p+"assets/img/image-20200607141942571.253e5d34.png"},652:function(t,a,s){"use strict";s.r(a);var v=s(15),e=Object(v.a)({},(function(){var t=this,a=t.$createElement,v=t._self._c||a;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"主键用数字还是-uuid？"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#主键用数字还是-uuid？"}},[t._v("#")]),t._v(" 主键用数字还是 UUID？")]),t._v(" "),v("h2",{attrs:{id:"什么是-uuid？"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#什么是-uuid？"}},[t._v("#")]),t._v(" 什么是 UUID？")]),t._v(" "),v("p",[t._v("UUID 是通用唯一识别码的缩写，其目的是让分布式系统中的所有元素，都能具有唯一的辨识信息，而不需要通过中央控制端来做辨识信息的指定。")]),t._v(" "),v("p",[t._v("下面是 UUID 的组成")]),t._v(" "),v("p",[v("img",{attrs:{src:s(409),alt:"image-20200607140909217"}})]),t._v(" "),v("div",{staticClass:"language-sql line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-sql"}},[v("code",[v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 数据库中使用 uuid 函数")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" uuid"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br"),v("span",{staticClass:"line-number"},[t._v("2")]),v("br")])]),v("h2",{attrs:{id:"为什么有人想要使用-uuid？"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#为什么有人想要使用-uuid？"}},[t._v("#")]),t._v(" 为什么有人想要使用 UUID？")]),t._v(" "),v("p",[t._v("在数据库集群中，为了避免每个 MySQL 各自生成的主键产生重复，所以有人考虑采用 UUID 方式")]),t._v(" "),v("p",[v("img",{attrs:{src:s(410),alt:"image-20200607141059856"}})]),t._v(" "),v("p",[t._v("如果采用自增模式，会出现全局 ID 冲突。")]),t._v(" "),v("h2",{attrs:{id:"uuid-主键的好处"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#uuid-主键的好处"}},[t._v("#")]),t._v(" UUID 主键的好处")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("分布式生成主键，减低了全局节点的压力，使得主键生成速度更快")])]),t._v(" "),v("li",[v("p",[t._v("主键全局唯一")])]),t._v(" "),v("li",[v("p",[t._v("跨服务器合并数据很方便")]),t._v(" "),v("p",[t._v("从第 2 条中派生出来的。由于 ID 唯一，所以整合方便。")])])]),t._v(" "),v("h2",{attrs:{id:"uuid-主键的缺点"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#uuid-主键的缺点"}},[t._v("#")]),t._v(" UUID 主键的缺点")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("浪费存储空间")]),t._v(" "),v("p",[t._v("UUID 占用 16 个字节，比 4 字节的 int 类型和 8 字节的 bigint 类型更占用存储空间。")]),t._v(" "),v("p",[t._v("在聚簇索引上，非主键列都会携带主键值，所以更占用空间")])]),t._v(" "),v("li",[v("p",[t._v("查询速度慢")]),t._v(" "),v("p",[t._v("UUID 是字符串，查询速度慢；")]),t._v(" "),v("p",[t._v("这个往深了说，还是和 B-Tree 有关。")])]),t._v(" "),v("li",[v("p",[t._v("数据写入随机性很大")]),t._v(" "),v("p",[t._v("UUID 不是顺序增长，作为主键，数据写入 IO 随机性很大；")]),t._v(" "),v("p",[t._v("这个往深了说，还是和 B-Tree  和存储机制有关。")])])]),t._v(" "),v("h2",{attrs:{id:"主键自动增长的有点"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#主键自动增长的有点"}},[t._v("#")]),t._v(" 主键自动增长的有点")]),t._v(" "),v("ul",[v("li",[t._v("占用空间少：int 和 BIGINT 类型占用存储空间少")]),t._v(" "),v("li",[t._v("检索速度快：MySQL 检索数字类型速度远快于字符串")]),t._v(" "),v("li",[t._v("IO 写入连续性好：由于主键是顺序增长的，写入连续性好")])]),t._v(" "),v("h2",{attrs:{id:"分布式环境下的主键自动增长"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#分布式环境下的主键自动增长"}},[t._v("#")]),t._v(" 分布式环境下的主键自动增长")]),t._v(" "),v("p",[t._v("有人想要使用 UUID 作为主键，就是在分布式环境下主键会全局冲突的问题。")]),t._v(" "),v("p",[v("img",{attrs:{src:s(411),alt:"image-20200607141942571"}})]),t._v(" "),v("p",[t._v("比如 MyCat 中间件，就可以生成全局连续的主键值。")]),t._v(" "),v("h2",{attrs:{id:"总结"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),v("p",[t._v("无论什么场合，都不推荐使用 UUID 作为数据表的主键；")]),t._v(" "),v("p",[t._v("分布式环境下有类似 MyCat 这样的中间件来生成全局的顺序主键")])])}),[],!1,null,null,null);a.default=e.exports}}]);